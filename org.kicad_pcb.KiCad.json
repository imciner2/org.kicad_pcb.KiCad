{
    "app-id": "org.kicad_pcb.KiCad",
    "runtime": "org.gnome.Platform",
    "runtime-version": "3.32",
    "sdk": "org.gnome.Sdk",
    "command": "kicad",
    "appdata-license": "AGPL-3.0+",
    "rename-desktop-file": "kicad.desktop",
    "rename-icon": "kicad",
    "rename-appdata-file": "kicad.appdata.xml",
    "finish-args": [
        "--share=network",
        "--socket=x11",
        "--device=dri",
        "--share=ipc",
        "--filesystem=home",
        "--env=KISYSMOD=/app/share/kicad/modules/",
        "--env=KISYS3DMOD=/app/share/kicad/modules/packages3d",
        "--env=KICAD_SYMBOL_DIR=/app/share/kicad/library",
        "--env=KICAD_TEMPLATE_DIR=/app/share/kicad/template/"
    ],
    "cleanup": ["/share/doc",
        "/share/aclocal", "/share/bakefile",
        "/lib/wx", "/include",
        "*.la", "*.a"],
    "modules": [
        "shared-modules/glu/glu-9.0.0.json",
        "shared-modules/glew/glew.json",
        "dependencies/glm.json",
        "dependencies/OCE.json",
        "dependencies/boost.json",
        "dependencies/swig.json",
        "dependencies/wxWidgets.json",
        "dependencies/wxPython-dependencies.json",
        "dependencies/wxPython.json",
        "ngspice.json",
        {
            "name": "kicad",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://launchpad.net/kicad/5.0/5.1.2/+download/kicad-5.1.2.tar.xz",
                    "sha256": "84376c50b436a1aec985d3de94e6f445ea5c1e5c75c04a239c9837a1ab40778a"
                },
                {
                    "type": "patch",
                    "path": "patches/0001-Fix-for-SWIG-4.0.0.patch",
                    "strip-components": 1
                }
            ],
            "buildsystem": "cmake",
            "config-opts": [
                "-DCMAKE_INSTALL_PREFIX=/app",
                "-DCMAKE_BUILD_TYPE=Release",
                "-DBOOST_ROOT=/app",
                "-DOCE_DIR=/app",
                "-DGLEW_LIBRARY=/app/lib/libGLEW.so",
                "-DGLEW_INCLUDE_DIR=/app/include/GL",
                "-DOPENGL_glu_LIBRARY=/app/lib/libGLU.so",
                "-DPYTHON_EXECUTABLE=/usr/bin/python3",
                "-DUSE_WX_GRAPHICS_CONTEXT=OFF",
                "-DUSE_WX_OVERLAY=OFF",
                "-DKICAD_SCRIPTING=ON",
                "-DKICAD_SCRIPTING_MODULES=ON",
                "-DKICAD_SCRIPTING_PYTHON3=ON",
                "-DKICAD_SCRIPTING_WXPYTHON=ON",
                "-DKICAD_SCRIPTING_WXPYTHON_PHOENIX=ON",
                "-DKICAD_SCRIPTING_ACTION_MENU=ON",
                "-DKICAD_SPICE=ON",
                "-DKICAD_USE_OCE=ON",
                "-DKICAD_USE_OCC=OFF",
                "-DBUILD_GITHUB_PLUGIN=ON"
            ]
        },
        {
            "name": "kicad-i18n",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/KiCad/kicad-i18n/archive/5.1.2.tar.gz",
                    "sha256": "a07ffc5c5cb61b2a81ff7716fbfd8f0d7a470961e7660d5d8e424a91bcf7d6e7"
                }
            ],
            "buildsystem": "cmake",
            "builddir": true,
            "config-opts": [
                "-DCMAKE_INSTALL_PREFIX=/app",
                "-DKICAD_I18N_UNIX_STRICT_PATH=ON"
            ]
        },
        "dependencies/perl-build.json",
        "dependencies/po4a.json",
        "dependencies/ruby-bundler.json",
        "dependencies/asciidoctor.json",
        {
            "name": "kicad-doc",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/KiCad/kicad-doc/archive/5.1.2.tar.gz",
                    "sha256": "db6756f5d10888b3c59ad808f522b3211a128207f7f725795ff941d401e61698"
                }
            ],
            "buildsystem": "cmake",
            "config-opts": [
                "-DCMAKE_INSTALL_PREFIX=/app",
                "-DBUILD_FORMATS=html"
            ]
        },
        "libraries/installer.json",
        "libraries/kicad-footprints.json",
        "libraries/kicad-packages3D.json",
        "libraries/kicad-symbols.json",
        "libraries/kicad-templates.json"
    ]
}
